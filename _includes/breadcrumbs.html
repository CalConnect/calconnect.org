<div id="breadcrumbs">
  <a href="{{'/' | relative_url}}">Home</a>
  {% assign crumbs = page.url | remove:'/index.html' | split: '/' %}
  {% if page.collection == 'posts' %}
  {% comment %} News post-specific logic {% endcomment %}
  / <a href="{{ '/news' | relative_url}}">News</a>
  / {{ page.title }}
  {% else %}
  {% for crumb in crumbs offset: 1 %}
  {% if forloop.last %}
  {% if page.url == '/membership/' %}
  / <a href="{{'/membership' | relative_url}}">Membership</a> / {{ page.title }}
  {% else %}
  / {{ page.title }}
  {% endif %}
  {% else %}
  {% assign crumb_limit = forloop.index | plus: 1 %}
  {% assign crumb_url = '' %}
  {% for crumb in crumbs limit: crumb_limit %}
    {% assign crumb_url = crumb_url | append: crumb | append: '/' %}
  {% endfor %}
    /
    <a href="{{crumb_url | absolute_url }}">{{ crumb | replace: '-', ' ' | capitalize }}</a>
  {% endif %}
  {% endfor %}
  {% endif %}
</div>
